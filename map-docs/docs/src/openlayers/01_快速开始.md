# ğŸš€ å¿«é€Ÿæ„å»º OpenLayers åœ°å›¾åº”ç”¨

## æ¨èæŠ€æœ¯æ ˆ

```bash
Vue 3.5.13+
OpenLayers 10.5.0+
Vite 6.3.5+
```

## åˆå§‹åŒ–é¡¹ç›®

```bash
# åˆ›å»ºViteé¡¹ç›®ï¼ˆé€‰æ‹©Vueæ¨¡æ¿ï¼‰
npm create vite@latest my-vue-ol -- --template vue

# è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å®‰è£…ä¾èµ–
cd my-vue-ol
npm install

# å®‰è£…OpenLayersæ ¸å¿ƒåº“
npm install ol --save

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## åˆ›å»ºåŸºç¡€åœ°å›¾

**å…³é”®æ³¨æ„äº‹é¡¹**

1. å®¹å™¨å°ºå¯¸ï¼šåœ°å›¾å®¹å™¨å¿…é¡»æœ‰æ˜ç¡®çš„å®½é«˜ï¼ˆæ¨èä½¿ç”¨ç»å¯¹å®šä½æˆ– flex å¸ƒå±€ï¼‰
2. åæ ‡ç³»ï¼šé»˜è®¤ä½¿ç”¨ EPSG:3857ï¼ˆçƒé¢å¢¨å¡æ‰˜æŠ•å½±ï¼‰ï¼Œç»çº¬åº¦åæ ‡éœ€è½¬æ¢
3. ç½‘ç»œé™åˆ¶ï¼šOSM æœåŠ¡åœ¨å›½å†…ä¸ç¨³å®šï¼Œæ¨èä½¿ç”¨å›½å†…åº•å›¾æ›¿ä»£æ–¹æ¡ˆ

```vue
<template>
  <div ref="mapContainer" id="map"></div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import Map from "ol/Map.js";
import OSM from "ol/source/OSM.js";
import TileLayer from "ol/layer/Tile.js";
import View from "ol/View.js";
import "ol/ol.css";
const mapContainer = ref(null);
let map = null;
onMounted(() => {
  initMap();
});
const initMap = () => {
  map = new Map({
    target: mapContainer.value,
    layers: [
      new TileLayer({
        source: new OSM(), // å®˜æ–¹ä½¿ç”¨OpenStreetMapä½œä¸ºåº•å›¾
      }),
    ],
    view: new View({
      center: [0, 0],
      zoom: 2,
    }),
  });
};
</script>
<style scoped>
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
}
</style>
```

### æ•ˆæœå›¾

![æ•ˆæœå›¾](./imgs/åˆå§‹åŒ–1.png)

### è®¿é—®å—é™

![è®¿é—®å—é™](./imgs/åˆå§‹åŒ–åŠ è½½å¤±è´¥.png)

## å›½å†…åœ°å›¾æœåŠ¡è§£å†³æ–¹æ¡ˆ

| æœåŠ¡å•†   | ç‰¹ç‚¹                   | ç”³è¯·åœ°å€   |
| -------- | ---------------------- | ---------- |
| é«˜å¾·åœ°å›¾ | æ›´æ–°å¿«ï¼Œè¦†ç›–å…¨         | æ— éœ€ Key   |
| å¤©åœ°å›¾   | å®˜æ–¹æƒå¨ï¼Œæ”¯æŒå¤šç§å›¾å±‚ | éœ€ç”³è¯· Key |
| è…¾è®¯åœ°å›¾ | å«æ˜Ÿå½±åƒè´¨é‡é«˜         | éœ€ç”³è¯· Key |

è¿™é‡Œä½¿ç”¨äº†é«˜å¾·åœ°å›¾å’Œå¤©åœ°å›¾ä½œä¸ºåº•å›¾æœåŠ¡ï¼Œæ³¨æ„æ›¿æ¢å¤©åœ°å›¾çš„ API Keyã€‚[ç”³è¯·åœ°å€](http://lbs.tianditu.gov.cn/home.html)

```vue
<template>
  <div ref="mapContainer" id="map"></div>
</template>

<script setup>
import { ref, onMounted } from "vue";
import Map from "ol/Map.js";
import XYZ from "ol/source/XYZ.js";
import TileLayer from "ol/layer/Tile.js";
import View from "ol/View.js";
import "ol/ol.css";
const mapContainer = ref(null);
let map = null;
onMounted(() => {
  initMap();
});
const initMap = () => {
  map = new Map({
    target: mapContainer.value,
    layers: [
      new TileLayer({
        // è®¾ç½®é«˜å¾·åœ°å›¾ä¸ºæ•°æ®æºåº•å›¾
        source: new XYZ({
          // é«˜å¾·åœ°å›¾ç“¦ç‰‡æœåŠ¡åœ°å€
          // url: "https://webst01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=6&x={x}&y={y}&z={z}",
          // è®¾ç½®è·¯ç½‘å›¾å±‚
          url: "https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",
          // è®¾ç½®å¤©åœ°å›¾å›¾å±‚
          // url: "http://t0.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=token", // tokenæ›¿æ¢ä¸ºä½ çš„å¤©åœ°å›¾API Key
        }),
      }),
    ],
    view: new View({
      center: [116.4074, 39.9042], // åŒ—äº¬å¸‚ä¸­å¿ƒç»çº¬åº¦
      zoom: 10,
      projection: "EPSG:4326", // é»˜è®¤ä½¿ç”¨çƒé¢å¢¨å¡æ‰˜æŠ•å½±(EPSG:3857)ï¼Œéœ€è¦è®¾ç½®ä¸ºWGS 84(EPSG:4326)ç»çº¬åº¦
    }),
  });
};
</script>
<style scoped>
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}
</style>
```

### æ•ˆæœå›¾

![æ•ˆæœå›¾](./imgs/åˆå§‹åŒ–.png)
